---
layout: post
title: Energy Saving Advice
image: /img/esas/logo.png
subtitle: Government Information Service
---

![Energy Saving Advice Service](/img/esas/background.png)

Work in progress.

## Introduction

This project was working with the [Government Department for Business, Energy and Industrial Strategy (BEIS)](https://www.gov.uk/government/organisations/department-for-business-energy-and-industrial-strategy) to provide a consumer-facing digital consumer energy advice service. The website targets a very broad audience and aims to provide tailored advice for different scenarios. 

![Typical question of the site](/img/esas/question.png)

It presents a set of questions to the user and then provides practical advice for a given situation. During early stage user research it became very clear that very different advice is needed for different consumers. For example, if you are living in a rented property the energy saving measures you are able to carry out are very different to if you own the property and you are able to replace the boiler or install solar panels.

After the energy saving measures are presented there is also information about government grants to help you with financial assistance and links to trusted tradespeople in your area who are able to carry out the work.

## Architecture
![Architecture diagram for the project](/img/esas/architecture.png){:height="600px"}

This project was a frontend AngularJS app with Typescript which sat on top of a WordPress site supported by a Java service layer. The Wordpress site was used as a content management system, allowing our client to regularly update the content of the site, without having to write any code. The Java and WordPress components were hosted on the [GOV.UK Platform as a Service (PaaS)](https://www.cloud.service.gov.uk/), a cloud-hosting platform built by the [Government Digital Service](https://www.gov.uk/government/organisations/government-digital-service). 

On the site, once a user has completed the questionnaire they are presented with a list of suggestions based on their answers. This information was provided through an API supported by the [Building Research Establishment (BRE)](https://www.bre.co.uk/energy). 

We also used the [OpenEPC Data API](https://epc.opendatacommunities.org/docs/api) in our service, to look up the energy performance certificate for a given property based on its postcode. Below is the function which is responsible for making the HTTP GET request from the API.

{% highlight typescript linenos %}
getEpcsForPostcode(postcode: string): Observable<Epc[]> {
    if (!this.epcs[postcode]) {
        const params = new HttpParams()
            .set('postcode', postcode)
            .set('size', EpcApiService.MAX_NUMBER_OF_EPCS_PER_RESPONSE.toString());
        this.epcs[postcode] = this.http
            .get(this.epcSearchEndpoint, {params: params})
            .map((result: JsonApiResponse<EpcResponse>) => EpcParserService.parse(result))
            .map(epcs => this.getMostRecentEpcs(epcs))
            .shareReplay(1);
    }
    return this.epcs[postcode];
}
{% endhighlight %}

This information was then surfaced on our site in a user-friendly way as shown here.

![Energy Performance Certificate](/img/esas/epc.png)

## Key Features

### Legacy Code

When I joined this team, the project was in the private beta phase. This meant that a version of the site was already live and made available to a select group of users in order to carry out user testing. At this stage, almost all of the heavy lifting was complete in terms of the architecture and there were mature designs for all of the features.

This was my first time picking up an existing codebase rather than starting a with greenfield project. This was a very different experience for me as there was a huge amount of unfamilar code to get my head around. On the previous projects, because I had seen it grow, I had an understanding of all of the different components and services, and of why we had chosen to do things in a certain way. But on this project, I had to accept that it would just take some time before I was comfortable with the codebase in the same way.

### Responsive Design

My main focus on this project was to modify the existing website to make it responsive, so that it would be user-friendly on mobile and tablet devices. In software development, it is best-practice to design _Mobile First_, since there is a lot less screen space to play with. This helps to avoid the problem of having to shoe-horn larger layouts or components onto a smaller screen as an after thought.

However, on this project during the alpha and beta test phases there was a very strong focus on user research. This meant that lots of different features and layouts were tried out before concrete decisions were made. This meant that it was not worth designing both desktop and mobile versions for components until they had made it through testing.

<!-- Working with designers to build new features. -->

![The desktop layout for the homepage](/img/esas/responsiveDesktop.png)

![The mobile layout for the homepage](/img/esas/responsiveMobile.png){:height="400px"}

### Chrome Debugging Tools
<!-- The Chrome devtools are extremely useful for diagnosing CSS issues and understanding observed behaviour

Use the clicker to select the element that is misbehaving

Systematically debug issues with CSS
Worked under general instruction, but was able to ask for help from tech lead. -->

![Google Chrome's developer debugging tools](/img/esas/devtools.png)


### Migrations
<!-- Writing migrations. -->

### Handover to Support

<!-- Helped migrate the project over to our dedicated support team. Getting them set up on the different environments and copying the database over. Giving access to everything 

Clarifying existing documentation
Working with others -->

### Standing desk

<!-- Posture
Keyboard position
Screens
Regular breaks -->


## Conclusion

[Final site](https://www.simpleenergyadvice.org.uk/)